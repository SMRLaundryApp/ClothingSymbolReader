#!/bin/sh
################################################################################
#	Copyright (C) 2020	Alejandro Colomar Andr√©s		       #
#	SPDX-License-Identifier:	GPL-2.0-only			       #
################################################################################
#
# Run laundry-symbol-reader docker image with an image passed as argument
#
################################################################################


################################################################################
#	functions							       #
################################################################################


################################################################################
#	main								       #
################################################################################
main()
{
	img=$1
	dir=$(realpath $(dirname ${img}))
	fname=$(basename ${img})

	vol="--volume ${dir}:/tmp/img"
	opt="--tty --interactive --rm ${vol}"
	dk_img="laundrysymbolreader/reader:v1.1"
	arg="/tmp/img/${fname}"
	cmd="laundry-symbol-reader ${arg}"

	dk="docker container run ${opt} ${dk_img} ${cmd}"
	${dk}
}

################################################################################
#	run								       #
################################################################################
main	$1


################################################################################
#	end of file							       #
################################################################################

